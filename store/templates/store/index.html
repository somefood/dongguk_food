{% extends "base.html" %}
{% load static %}
{% block extra-style %}
<link rel="stylesheet" href="{% static 'css/styles.css' %}">
{% endblock %}
{% block content %}
<h1 class="my-4">가게 소개</h1>
<hr>
{% if user.is_staff %}
<button class="btn btn-primary" onclick="location.href='{% url 'store:store_add' %}'">추가</button>
{% endif %}
<div class="row no-gutters">
  {% for store in store_list %}
  <div class="col-sm-4">
    <div class="card" style="border-style: none">
      <a href="{{ store.get_absolute_url }}"><img class="card-img-top" style="height: 250px; width: 100%" src="{% if store.store_image %}{{ store.store_image.url }}{% else %}{% static 'img/alt_image.png' %}{% endif %}" alt=""></a>
    </div>
  </div>
  <div class="col-sm-8 mb-5">
    <div class="card" style="border-style: none">
      <div class="card-body" style="height: 250px; position: relative;">
          <span style="position: absolute; right: 20px;"><button post-id="{{ store.pk }}" class="btn store-like">
            {% if user in store.like_users.all %}
              <i id="like-heart-{{ store.pk }}" class="fas fa-heart fa-3x"></i></button>
            {% else %}
              <i id="like-heart-{{ store.pk }}" class="far fa-heart fa-3x"></i></button>
            {% endif %}</button>
            <p id="count-{{ store.pk }}" style="text-align: center">{{ store.like_users.count }}개</p>
          </span>
        <a class="h2 text-dark" href="{{ store.get_absolute_url }}">{{ forloop.counter}}. {{ store.name }}</a>
        <address>{{ store.location }}</address>
        <p class="card-text" style="position: static;">{{ store.description }}</p>
        <a href="{{ store.get_absolute_url }}" class="btn btn-primary" style="position: absolute; right:20px; bottom:20px;">더보기</a>
      </div>
    </div>
  </div>
  <hr style="width:100%; margin-bottom: 30px;">
  {% endfor %}
</div>
{% endblock %}
{% block extra-script %}
<script>
    var MyGlobal = {
        url: "{% url 'store:like' %}",
    }
</script>
<script type="text/javascript" src="{% static 'js/scripts.js' %}"></script>
{% endblock %}